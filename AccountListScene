// Author: David Corrales Marco

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;
import java.util.ArrayList;

import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.BorderPane;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.VBox;
import javafx.scene.text.Font;
import javafx.scene.text.Text;

import java.util.ArrayList;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.GridPane;

public class AccountListScene extends SceneBasic
{

	GridPane root = new GridPane();//container holding the main elements of the scene
	Text list = new Text("");//where the list of accounts will be printed
	
	public AccountListScene ()
	{
		super("Account List Menu");
		
		Label title = new Label("Account List Scene");
		title.setFont(new Font(40));

		Button adminMenu = new Button("AdminMenu");//brings the user back to the adminScene
		Button logOut = new Button("Log out");//brings the user back to the loginScene
		
		adminMenu.setOnAction(e-> SceneManager.setAdminScene());
		logOut.setOnAction(e-> SceneManager.setLoginScene());
		
		root = new GridPane();
		root.setAlignment(Pos.CENTER);
		root.setVgap(10);
		root.setHgap(5);
		
		root.add(adminMenu, 0, 2);
		root.add(logOut, 1, 2);
		root.add(quit, 3, 2);
		
		VBox vbox = new VBox(30, title, root);
		vbox.setAlignment(Pos.CENTER);

		BorderPane bp = new BorderPane(vbox);
		BorderPane.setAlignment(bp, Pos.CENTER);
		super.scene = new Scene(bp, 400, 300);	
	}
	
	//sends signal to server requesting the accountList and sets the returned message to list
	public void getAccountList() 
	{
		try 
		{
			
			Socket socket = SceneManager.getSocket();//gets socket from the SceneManager to use in method
			BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
			PrintWriter out = new PrintWriter(SceneManager.getSocket().getOutputStream());
			out.println("ACCOUNTLIST");
			out.flush();
			String message = in.readLine();
			message += "\n" + in.readLine();
			list.setText(message);//sets the message returned from the server to list
			root.add(list, 0, 0);
						
		} catch (Exception e) {
			
		}
		
	}
}
