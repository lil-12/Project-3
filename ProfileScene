// Author: Lillian Davis

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.io.PrintWriter;
import java.net.Socket;

import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.layout.GridPane;

public class ProfileScene extends SceneBasic
{
	
	private Label thisProfile;
	private Label errorLabel;
	
	
	public ProfileScene ()
	{
		super("Profile");
		thisProfile = new Label();
		errorLabel = new Label();
		Button exit = new Button("Exit");
		exit.setOnAction( e-> SceneManager.setClientScene());
		layout.getChildren().add(thisProfile);
		layout.getChildren().add(errorLabel);	
		layout.getChildren().add(exit);
	}	
	
	public void getProfile() 
	{
		try{
			Socket socket = SceneManager.getSocket();
			BufferedReader incoming = new BufferedReader(new InputStreamReader(socket.getInputStream()));
			PrintWriter outgoing = new PrintWriter(SceneManager.getSocket().getOutputStream());
			outgoing.println("PROFILE");
			outgoing.flush();
			String profile = incoming.readLine();//signal from server
			thisProfile.setText(profile);
			incoming.close();
			outgoing.close();
		}
		catch(Exception e)
		{
			errorLabel = new Label("error: "+(e.toString()));//if an unknown or socket error has occured
			e.printStackTrace();
		}
	}
	
}
