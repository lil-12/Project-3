import java.io.IOException;
import java.net.Socket;
import java.net.UnknownHostException;

import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.PasswordField;
import javafx.scene.control.TextField;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;

// Author: Lillian Davis

public class SettingsScene extends SceneBasic
{
	private TextField textH;
	private TextField textP;
	private Label errorLabel;
	
	public SettingsScene() {
		super("Settings");
		GridPane display = new GridPane();//container holding the labels and textfeilds for port and host
		Label labelH = new Label("Host: ");//label for username texfield
		Label labelP = new Label("Port Number: ");//label for port textfield
		errorLabel = new Label();//will be set if there is an error connecting 
		textH = new TextField();//host textfield
		textP = new TextField();//port textfield
		display.add(labelH,0,0);
		display.add(labelP,0,1);
		display.add(textH,1,0);
		display.add(textP,1,1);
		layout.getChildren().add(display);//"layout is for my scene basic. change this for project three
		Button cancel = new Button("Cancel");//login button
		Button connect = new Button("Connect");//settings button
		cancel.setOnAction(e-> 
			{	
				cancel();
			});//go back to loginScene
		connect.setOnAction(e->
			{
				apply();
			});
		layout.getChildren().add(errorLabel);
		HBox buttons = new HBox();
		buttons.getChildren().add(cancel);
		buttons.getChildren().add(connect);
		layout.getChildren().add(buttons);  
	}
	
	private void cancel()
	{
		errorLabel.setText("");
		SceneManager.setLoginScene();
	}
	
	private void apply()
	{
		
		try 
		{
			String portNum = textP.getText();
			int port = Integer.parseInt(portNum);
			Socket connection = new Socket(textH.getText(),port);
			SceneManager.setSocket(connection);
		} 
		catch (Exception e) 
		{
			errorLabel.setText("error: "+e.toString());
			e.printStackTrace();
		}
	}
	
}
